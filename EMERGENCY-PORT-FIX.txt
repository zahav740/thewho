üö® –≠–ö–°–¢–†–ï–ù–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–†–¢–û–í –ù–ê BEGET –ß–ï–†–ï–ó SSH
==================================================

‚ùå –ü–†–û–ë–õ–ï–ú–ê: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ localhost:5100, 
            –Ω–æ –±—ç–∫–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É

‚úÖ –†–ï–®–ï–ù–ò–ï: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä—è–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

==================================================
–ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (2 –º–∏–Ω—É—Ç—ã)
==================================================

1. SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É Beget

2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:
   cd /var/upload/

3. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   wget https://github.com/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/fix-beget-ports.sh
   
   –ò–õ–ò —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é:
   nano fix-beget-ports.sh
   (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ fix-beget-ports.sh)

4. –ó–∞–ø—É—Å–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   chmod +x fix-beget-ports.sh
   ./fix-beget-ports.sh

==================================================
–†–£–ß–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
==================================================

1. SSH –∫ —Å–µ—Ä–≤–µ—Ä—É: cd /var/upload/

2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã:
   pm2 delete all

3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å Backend:
   cd backend
   nano .env
   
   –ò–∑–º–µ–Ω–∏—Ç—å:
   PORT=5100  ‚Üí  PORT=5200
   CORS_ORIGIN=http://localhost:5101  ‚Üí  CORS_ORIGIN=https://kasuf.xyz

4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å Frontend:
   cd ../frontend
   nano .env
   
   –ò–∑–º–µ–Ω–∏—Ç—å/–¥–æ–±–∞–≤–∏—Ç—å:
   PORT=5201
   REACT_APP_API_URL=https://kasuf.xyz/api

5. –û–±–Ω–æ–≤–∏—Ç—å PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   cd ..
   nano ecosystem.config.js
   
   –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç—ã:
   Backend: PORT: 5200
   Frontend: args: '-s build -l 5201'

6. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
   cd backend && npm run build
   cd ../frontend && npm run build
   cd ..

7. –ó–∞–ø—É—Å—Ç–∏—Ç—å:
   pm2 start ecosystem.config.js
   pm2 save

8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   pm2 status
   curl http://localhost:5200/health
   curl http://localhost:5201

==================================================
–ü–†–û–í–ï–†–ö–ê NGINX (–í–ê–ñ–ù–û!)
==================================================

–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Beget:
"–°–∞–π—Ç—ã" ‚Üí kasuf.xyz ‚Üí "Nginx"

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

location / {
    proxy_pass http://127.0.0.1:5201;  ‚Üê –ü–û–†–¢ 5201
}

location /api/ {
    proxy_pass http://127.0.0.1:5200/; ‚Üê –ü–û–†–¢ 5200
}

==================================================
–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
==================================================

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 5200
‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 5201  
‚úÖ API –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ https://kasuf.xyz/api
‚úÖ –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ https://kasuf.xyz
‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç

==================================================
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú
==================================================

–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
   pm2 logs crm-backend
   pm2 logs crm-frontend

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã:
   netstat -tlnp | grep 5200
   netstat -tlnp | grep 5201

3. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
   curl -v http://localhost:5200/health
   curl -v http://localhost:5201

4. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:
   pm2 delete all
   ./fix-beget-ports.sh

==================================================

üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤ –≤–∞—à CRM –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç!