# Система планирования производства с Supabase

Это расширение проекта с реализацией системы планирования производства и учета смен с использованием Supabase в качестве бэкенда.

## Настройка Supabase

1. Создайте новый проект на [Supabase](https://app.supabase.com/)
2. После создания проекта, откройте SQL Editor и выполните скрипт `supabase-schema.sql` для создания необходимых таблиц
3. Перейдите в Project Settings > API и скопируйте URL и anon key
4. Создайте файл `.env` в корне проекта и добавьте в него следующие строки:
   ```
   VITE_SUPABASE_URL=https://your-supabase-project-url.supabase.co
   VITE_SUPABASE_KEY=your-supabase-anon-key
   ```

## Установка и запуск

1. Установите зависимости:
   ```
   npm install
   ```

2. Запустите проект в режиме разработки:
   ```
   npm run dev
   ```

## Доступ к модулям с Supabase

Модули Supabase доступны по следующим URL:

- Список заказов: `/supabase/orders`
- Создание заказа: `/supabase/orders/new`
- Детали заказа: `/supabase/orders/:orderId`
- Редактирование заказа: `/supabase/orders/:orderId/edit`
- Планирование заказа: `/supabase/planning/:orderId`
- Список смен: `/supabase/shifts`
- Добавление смены: `/supabase/shifts/new`

## Архитектура системы

Система состоит из пяти основных модулей:

1. **Модуль базового планирования** – оптимальное распределение операций по станкам
2. **Модуль Shift Tracking (отслеживания смен)** – детальный учет дневных и ночных смен
3. **Модуль контроля выполнения** – анализ фактического выполнения операций
4. **Модуль обработки форс-мажоров** – регистрация и обработка нештатных ситуаций
5. **Модуль адаптивного перепланирования** – корректировка планов на основе фактических данных

```
┌─────────────────────────────┐          ┌────────────────────────────┐
│   Модуль базового           │          │  Модуль Shift Tracking     │
│   планирования              │◄─────────┤  (отслеживания смен)       │
│                             │          │                            │
│  • Создание оптимального    │          │  • Учет дневных/ночных     │
│    начального плана         │          │    смен                    │
│  • Распределение операций   │          │  • Учет наладок            │
│  • Учет ограничений         │          │  • Фиксация операторов     │
└────────────┬────────────────┘          └─────────────┬──────────────┘
             │                                         │
             │                  ┌─────────────────────▼──────────────┐
             │                  │   Модуль контроля                  │
             │                  │   выполнения                       │
             │                  │                                    │
             │                  │  • Анализ фактических данных       │
             │                  │  • Расчет отклонений               │
             │                  │  • Сравнение дневной/ночной смены  │
             │                  └─────────────────┬──────────────────┘
             │                                    │
             │                  ┌─────────────────▼──────────────────┐
             │                  │   Модуль обработки                 │
             │                  │   форс-мажоров                     │
             │                  │                                    │
             │                  │  • Регистрация инцидентов          │
             │                  │  • Оценка влияния                  │
             │                  │  • Система алертов                 │
             │                  └─────────────────┬──────────────────┘
             │                                    │
┌────────────▼────────────────────────────────────▼──────────────────┐
│   Модуль адаптивного перепланирования                              │
│                                                                    │
│  • Корректировка планов на основе фактической производительности   │
│  • Перепланирование при форс-мажорах                               │
│  • Анализ производительности операторов в разных сменах            │
│  • Инкрементальные обновления плана                                │
└────────────────────────────────────────────────────────────────────┘
```

## Основные возможности

1. **Базовое планирование**
   - Создание оптимального плана распределения операций по станкам
   - Учет типов операций и возможностей станков
   - Расчет времени выполнения с учетом наладки и буферного времени

2. **Учет смен**
   - Отслеживание дневных (8:00-16:00) и ночных (16:00-8:00) смен
   - Учет выполненных операций и наладок
   - Фиксация операторов, работающих в смене

3. **Адаптивное перепланирование**
   - Автоматическое перепланирование на основе фактических данных
   - Учет разной эффективности в дневных и ночных сменах
   - Корректировка прогноза выполнения заказов

4. **Управление календарем**
   - Учет рабочих дней (воскресенье-четверг)
   - Учет выходных (пятница-суббота)
   - Поддержка праздников

## Развитие системы

Система может быть расширена следующими функциями:

1. **Улучшенная визуализация**
   - Диаграмма Ганта для наглядного представления расписания
   - Дашборды для анализа эффективности

2. **Расширенная аналитика**
   - Сравнение эффективности дневных и ночных смен
   - Анализ производительности станков и операторов

3. **Интеграции**
   - Экспорт данных в Excel
   - Интеграция с ERP-системами

4. **Мобильное приложение**
   - Ввод данных с мобильных устройств
   - Уведомления о перепланировании
