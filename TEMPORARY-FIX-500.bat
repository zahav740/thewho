@echo off
chcp 65001 > nul
echo ============================================
echo ВРЕМЕННОЕ РЕШЕНИЕ ДЛЯ ОШИБКИ 500
echo ============================================
echo.
echo Применены следующие изменения:
echo.
echo 1. ВРЕМЕННО ОТКЛЮЧЕНА ЗАГРУЗКА ОПЕРАЦИЙ:
echo    - Заказы будут открываться без ошибок
echo    - Операции пока не будут отображаться
echo    - Но можно будет работать с заказами
echo.
echo 2. ОПЕРАЦИИ СОХРАНЯЮТСЯ В БД:
echo    - При создании/редактировании операции сохраняются
echo    - Но пока не отображаются при загрузке
echo.
echo ============================================
echo.
echo Это временное решение позволит продолжить работу
echo пока мы ищем причину ошибки с операциями.
echo.
echo ============================================
echo.
echo Остановка приложения...
taskkill /F /IM node.exe 2>nul
timeout /t 2 /nobreak > nul
echo.
echo Перезапуск backend и frontend...
start cmd /k "cd backend && npm start"
timeout /t 5 /nobreak > nul
start cmd /k "cd frontend && npm start"
echo.
echo ============================================
echo Приложение перезапущено!
echo.
echo Backend: http://localhost:3001
echo Frontend: http://localhost:3000
echo.
echo Теперь заказы открываются без ошибок!
echo ============================================
pause
