@echo off
chcp 65001 >nul
echo ==========================================
echo üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ù–û–í–û–ô –°–ò–°–¢–ï–ú–´ –û–ü–ï–†–ê–¶–ò–ô
echo ==========================================
echo.

echo üìã –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å backend...

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç
curl -s http://localhost:3000/api/operation-management/test >nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ùå Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
    echo –ó–∞–ø—É—Å—Ç–∏—Ç–µ: START-BACKEND.bat
    echo.
    pause
    exit /b 1
)

echo ‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç
echo.

echo üìã –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å API...

echo –¢–µ—Å—Ç–∏—Ä—É–µ–º /api/operation-management/test...
curl -s http://localhost:3000/api/operation-management/test | jq -r ".status // \"Error\""

echo –¢–µ—Å—Ç–∏—Ä—É–µ–º /api/progress/test...  
curl -s http://localhost:3000/api/progress/test | jq -r ".status // \"Error\""

echo.
echo üìä –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...

psql -h localhost -p 5432 -U postgres -d thewho -c "
SELECT 
  'üìã –î–ê–ù–ù–´–ï –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:' as info,
  COUNT(CASE WHEN ord.drawing_number = 'C6HP0021A' THEN 1 END) as orders_with_operations,
  COUNT(CASE WHEN ord.drawing_number IN ('CH1JK281A', 'E-87019') THEN 1 END) as orders_without_operations,
  COUNT(*) as total_test_orders
FROM orders ord
WHERE ord.drawing_number IN ('C6HP0021A', 'CH1JK281A', 'E-87019');
"

echo.
echo üéØ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ:
echo.
echo 1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001/operation-test
echo 2. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑ "C6HP0021A" (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
echo 3. –ù–∞–∂–º–∏—Ç–µ "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
echo 4. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é"
echo 5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
echo 6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é
echo.
echo 7. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑ "CH1JK281A" (–Ω–æ–≤—ã–π –∑–∞–∫–∞–∑)
echo 8. –ù–∞–∂–º–∏—Ç–µ "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" - –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ "–ù–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π"
echo 9. –°–æ–∑–¥–∞–π—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
echo 10. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–∫–∞–∑–æ–≤
echo.

echo üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:
echo.
echo ‚úÖ –î–ª—è –∑–∞–∫–∞–∑–∞ C6HP0021A:
echo    - –ï—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
echo    - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç MILLING –æ–ø–µ—Ä–∞—Ü–∏–∏
echo    - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –±—É–¥–µ—Ç –≤—ã—Å–æ–∫–æ–π
echo.
echo ‚ö†Ô∏è  –î–ª—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤:
echo    - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
echo    - –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –æ–±—É—á–∞—Ç—å—Å—è –æ—Ç –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
echo    - –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ—è–≤—è—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
echo.

echo üöÄ –ù–ê–ß–ê–¢–¨ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï?
echo.
echo –ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–ª–∞–≤–∏—à—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞...
pause >nul

start http://localhost:3001/operation-test

echo.
echo ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
echo.
echo üìù –í–ê–ñ–ù–û: –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
echo 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ frontend –∑–∞–ø—É—â–µ–Ω: START-FRONTEND.bat
echo 2. –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç:
echo    - frontend/src/components/SimpleOperationManagement.tsx
echo    - frontend/src/pages/OperationTestPage.tsx
echo 3. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç –≤ App.tsx –∏–ª–∏ —Ä–æ—É—Ç–µ—Ä
echo.

pause
