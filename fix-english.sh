#!/bin/bash

echo "üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–π –≤–µ—Ä—Å–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd "$(dirname "$0")"

echo "üìÅ –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $(pwd)"

# 1. –û—á–∏—â–∞–µ–º localStorage
echo "üßπ –û—á–∏—Å—Ç–∫–∞ localStorage..."
cat > clear-localstorage.html << 'EOF'
<!DOCTYPE html>
<html>
<head>
    <title>Clear LocalStorage</title>
</head>
<body>
    <script>
        localStorage.clear();
        localStorage.setItem('language', 'en');
        console.log('LocalStorage –æ—á–∏—â–µ–Ω, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫');
        alert('LocalStorage –æ—á–∏—â–µ–Ω! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.');
    </script>
    <h1>LocalStorage –æ—á–∏—â–µ–Ω</h1>
    <p>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.</p>
</body>
</html>
EOF

# 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
if [ ! -d "node_modules" ] || [ ! -f "node_modules/.package-lock.json" ]; then
    echo "‚ö†Ô∏è  –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º..."
    npm install
else
    echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
fi

# 3. –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ i18n
echo "üíæ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ i18n..."
cp src/i18n/index.ts src/i18n/index.ts.backup

# 4. –ü—Ä–∏–º–µ–Ω—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
echo "üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ i18n..."
cp src/i18n/index-debug.ts src/i18n/index.ts

# 5. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏..."
echo "–û—Ç–∫—Ä–æ–π—Ç–µ clear-localstorage.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∑–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ:"
echo "npm run dev"

echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:"
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ clear-localstorage.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ"
echo "2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm run dev"
echo "3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173"
