@echo off
echo.
echo üîç –ü–æ–∏—Å–∫ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ Production CRM
echo.

cd /d "%~dp0"

echo üìÅ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ src...
echo.

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
if not exist "src\i18n\translations.ts" (
    echo ‚ùå –§–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω: src\i18n\translations.ts
    pause
    exit /b 1
)

echo ‚úÖ –§–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–∞–π–¥–µ–Ω: src\i18n\translations.ts
echo.

:: –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π t('...') –≤ —Ñ–∞–π–ª–∞—Ö TypeScript –∏ React
echo üîç –ò—â–µ–º –≤—Å–µ –∫–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∫–æ–¥–µ...
echo.

:: –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
set "temp_file=%temp%\translation_keys.txt"
if exist "%temp_file%" del "%temp_file%"

:: –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–π –≤ —Ñ–∞–π–ª–∞—Ö .tsx –∏ .ts
for /r src %%f in (*.tsx *.ts) do (
    findstr /R "t\s*(\s*['\"]" "%%f" >nul 2>&1
    if !errorlevel! equ 0 (
        echo üìÑ –ù–∞–π–¥–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –≤ —Ñ–∞–π–ª–µ: %%f
        findstr /R "t\s*(\s*['\"]" "%%f"
        echo.
    )
)

echo.
echo üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
echo.
echo üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
echo    1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –µ—Å—Ç—å –≤ src\i18n\translations.ts
echo    2. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ t('–∫–ª—é—á') –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞
echo    3. –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã —Å—Ä–∞–∑—É –¥–ª—è –æ–±–æ–∏—Ö —è–∑—ã–∫–æ–≤ (ru –∏ en)
echo.
pause
