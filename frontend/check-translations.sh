#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∫–æ–¥–µ
# –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Ö –Ω–∞–ª–∏—á–∏—è –≤ —Ñ–∞–π–ª–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

echo "üîç –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ..."

# –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Ñ–∞–π–ª—ã .tsx –∏ .ts
find src -name "*.tsx" -o -name "*.ts" | grep -v ".test." | grep -v "node_modules" | while read file; do
  echo ""
  echo "üìÅ –§–∞–π–ª: $file"
  
  # –ò—â–µ–º –≤—ã–∑–æ–≤—ã t('...') –∏ tWithParams('...')
  grep -n "t\s*(\s*['\"]" "$file" | while read line; do
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á –ø–µ—Ä–µ–≤–æ–¥–∞
    key=$(echo "$line" | sed -n "s/.*t\s*(\s*['\"][^'\"]*['\"].*/\1/p" | cut -d':' -f2- | sed "s/.*t\s*(\s*['\"]//g" | sed "s/['\"].*//g")
    if [ ! -z "$key" ]; then
      echo "  ‚úÖ –ù–∞–π–¥–µ–Ω –∫–ª—é—á: $key"
    fi
  done
done

echo ""
echo "üéØ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –µ—Å—Ç—å –≤ —Ñ–∞–π–ª–µ src/i18n/translations.ts"
