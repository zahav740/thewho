<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <!-- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π viewport –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#1890ff" />
    <meta name="description" content="CRM —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º" />
    
    <!-- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Production CRM" />
    
    <!-- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Android -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Production CRM" />
    
    <!-- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞–≤—Ç–æ–∑—É–º–∞ –Ω–∞ iOS –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ input -->
    <meta name="format-detection" content="telephone=no" />
    
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <title>Production CRM</title>
    
    <!-- SheetJS –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è Excel —Ñ–∞–π–ª–æ–≤ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- CSS –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è FOUC –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <style>
      /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è */
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow-x: hidden;
        /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑—É–º–∞ */
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        text-size-adjust: 100%;
      }
      
      #root {
        min-height: 100vh;
        width: 100%;
        background-color: #f0f2f5;
        /* –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ–º scale transform –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      }
      
      /* –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω */
      .initial-loading {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: #f0f2f5;
        font-size: 16px;
        color: #666;
      }
      
      /* –°–∫—Ä—ã—Ç—å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ React */
      .app-loaded .initial-loading {
        display: none;
      }
      
      /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã */
      @media (max-width: 768px) {
        html {
          font-size: 16px; /* –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        }
        
        body {
          font-size: 16px;
        }
      }
      
      @media (max-width: 480px) {
        html {
          font-size: 16px; /* –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        }
      }
      
      /* –¢–æ–ª—å–∫–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ –ø—Ä–∏–º–µ–Ω—è–µ–º —É–º–µ–Ω—å—à–µ–Ω–∏–µ */
      @media (min-width: 1200px) {
        #root {
          transform: scale(0.9);
          transform-origin: top center;
          width: 111.11%;
        }
      }
      
      /* Touch-friendly */
      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      
      /* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
      button, .ant-btn, .ant-menu-item {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      
      /* –ú–æ–±–∏–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
      @media (max-width: 768px) {
        /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–æ–∫ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∫–∞—Å–∞–Ω–∏–π */
        .ant-btn {
          min-height: 44px !important;
          padding: 8px 16px !important;
          font-size: 16px !important;
        }
        
        /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞ */
        .ant-input,
        .ant-input-affix-wrapper,
        .ant-select-selector {
          min-height: 44px !important;
          font-size: 16px !important; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
        }
        
        /* –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
        .ant-layout-content {
          padding: 12px !important;
        }
        
        .ant-card-body {
          padding: 12px !important;
        }
        
        /* –£–ª—É—á—à–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã */
        .ant-table-wrapper {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
        
        /* –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .ant-modal {
          margin: 8px !important;
          max-width: calc(100vw - 16px) !important;
        }
      }
    </style>
  </head>
  <body>
    <noscript>–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å JavaScript –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.</noscript>
    <div id="root">
      <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω –ø–æ–∫–∞ React –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è -->
      <div class="initial-loading">
        <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</div>
      </div>
    </div>
    
    <script>
      // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      const isMobile = window.innerWidth <= 768;
      const isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
      
      console.log('Device info:', {
        width: window.innerWidth,
        height: window.innerHeight,
        isMobile: isMobile,
        isTablet: isTablet,
        userAgent: navigator.userAgent
      });
      
      // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ React
      window.addEventListener('load', function() {
        setTimeout(function() {
          document.body.classList.add('app-loaded');
        }, 100);
      });
      
      // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑—É–º–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
      if (isMobile) {
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥–≤–æ–π–Ω–æ–≥–æ —Ç–∞–ø–∞ –¥–ª—è –∑—É–º–∞
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
          const now = (new Date()).getTime();
          if (now - lastTouchEnd <= 300) {
            event.preventDefault();
          }
          lastTouchEnd = now;
        }, { passive: false });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∂–µ—Å—Ç–æ–≤ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
        document.addEventListener('gesturestart', function (e) {
          e.preventDefault();
        }, { passive: false });
        
        document.addEventListener('gesturechange', function (e) {
          e.preventDefault();
        }, { passive: false });
        
        document.addEventListener('gestureend', function (e) {
          e.preventDefault();
        }, { passive: false });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ Pinch-to-zoom
        document.addEventListener('touchstart', function (e) {
          if (e.touches.length > 1) {
            e.preventDefault();
          }
        }, { passive: false });
        
        document.addEventListener('touchmove', function (e) {
          if (e.touches.length > 1) {
            e.preventDefault();
          }
        }, { passive: false });
      }
      
      // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ –ø—Ä–∏–º–µ–Ω—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç–∫—Ä–∞–Ω –±–æ–ª—å—à–µ 1200px)
      document.addEventListener('DOMContentLoaded', function() {
        const rootElement = document.getElementById('root');
        
        if (!isMobile && !isTablet && window.innerWidth >= 1200) {
          // –¢–æ–ª—å–∫–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
          rootElement.style.transform = 'scale(0.9)';
          rootElement.style.transformOrigin = 'top center';
          rootElement.style.width = '111.11%';
          console.log('‚úÖ –ú–∞—Å—à—Ç–∞–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–º–µ–Ω—å—à–µ–Ω –¥–ª—è –±–æ–ª—å—à–æ–≥–æ —ç–∫—Ä–∞–Ω–∞');
        } else {
          // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –ø–ª–∞–Ω—à–µ—Ç–æ–≤ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
          rootElement.style.transform = 'none';
          rootElement.style.width = '100%';
          console.log('üì± –ú–æ–±–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: –º–∞—Å—à—Ç–∞–± –Ω–µ –∏–∑–º–µ–Ω–µ–Ω');
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
        window.addEventListener('orientationchange', function() {
          setTimeout(function() {
            const newIsMobile = window.innerWidth <= 768;
            const newIsTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
            
            if (newIsMobile || newIsTablet) {
              rootElement.style.transform = 'none';
              rootElement.style.width = '100%';
            } else if (window.innerWidth >= 1200) {
              rootElement.style.transform = 'scale(0.9)';
              rootElement.style.transformOrigin = 'top center';
              rootElement.style.width = '111.11%';
            }
          }, 200);
        });
      });
      
      // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
      window.addEventListener('resize', function() {
        const rootElement = document.getElementById('root');
        const newIsMobile = window.innerWidth <= 768;
        const newIsTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
        
        if (newIsMobile || newIsTablet) {
          rootElement.style.transform = 'none';
          rootElement.style.width = '100%';
        } else if (window.innerWidth >= 1200) {
          rootElement.style.transform = 'scale(0.9)';
          rootElement.style.transformOrigin = 'top center';
          rootElement.style.width = '111.11%';
        }
      });
    </script>
  </body>
</html>
