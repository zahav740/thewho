# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –í–û–ó–í–†–ê–©–ï–ù–ò–Ø –û–ü–ï–†–ê–¶–ò–ô

## ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:**
–ü–æ—Å–ª–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Å—Ç–∞–Ω–∫–∞ –≤ —Å–µ–∫—Ü–∏–∏ "–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ" –æ–ø–µ—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞—Å—å –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å—Ç–∞–Ω–æ–∫. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ç–æ–ª—å–∫–æ –º–µ–Ω—è–ª–∞ —Å—Ç–∞—Ç—É—Å `isAvailable = true`, –Ω–æ –ù–ï –æ—Ç–º–µ–Ω—è–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏—é (`currentOperationId` –æ—Å—Ç–∞–≤–∞–ª—Å—è).

## üîç **–ê–ù–ê–õ–ò–ó –ü–†–ò–ß–ò–ù–´:**
1. **–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è:** `updateAvailabilityMutation` —Ç–æ–ª—å–∫–æ –º–µ–Ω—è–ª —Å—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
2. **–û–ø–µ—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–π:** `currentOperationId` –Ω–µ —É–¥–∞–ª—è–ª—Å—è  
3. **–°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∞ —Å—Ç–∞—Ç—É—Å:** –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞–Ω–æ–∫ —Å–Ω–æ–≤–∞ –ø–æ–º–µ—á–∞–ª—Å—è –∫–∞–∫ –∑–∞–Ω—è—Ç—ã–π

## ‚úÖ **–†–ï–®–ï–ù–ò–ï:**

### 1. **–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –º—É—Ç–∞—Ü–∏—è `freeAndClearOperationMutation`:**
```typescript
const freeAndClearOperationMutation = useMutation({
  mutationFn: async () => {
    // –°–ù–ê–ß–ê–õ–ê –æ—Ç–º–µ–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ –µ—Å—Ç—å)
    if (machine.currentOperationId) {
      await machinesApi.unassignOperation(machine.machineName);
    }
    
    // –ó–ê–¢–ï–ú –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º —Å—Ç–∞–Ω–æ–∫
    return await machinesApi.updateAvailability(machine.machineName, true);
  },
  // ... –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É—Å–ø–µ—Ö–∞ –∏ –æ—à–∏–±–æ–∫
});
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏:**
–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "‚úÖ –û—Å–≤–æ–±–æ–¥–∏—Ç—å —Å—Ç–∞–Ω–æ–∫" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

```
üóëÔ∏è –û—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Å—Ç–∞–Ω–æ–∫
üíπ –ü—Ä–æ—Å—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å (–æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é)
```

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `handleAvailabilityChange`:**
```typescript
if (checked && !machine.isAvailable && machine.currentOperationId) {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∑–∞–Ω—è—Ç–æ–≥–æ —Å—Ç–∞–Ω–∫–∞ —Å –æ–ø–µ—Ä–∞—Ü–∏–µ–π
  confirm({
    content: (
      <div>
        <Button onClick={() => freeAndClearOperationMutation.mutate()}>
          üóëÔ∏è –û—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Å—Ç–∞–Ω–æ–∫
        </Button>
        <Button onClick={() => updateAvailabilityMutation.mutate(true)}>
          üíπ –ü—Ä–æ—Å—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å (–æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é)
        </Button>
      </div>
    )
  });
}
```

### 4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚úÖ –ó–∞–∫—Ä—ã—Ç—å" –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**
```typescript
// –ë–´–õ–û:
onClick={() => handleAvailabilityChange(true)}

// –°–¢–ê–õ–û:
onClick={() => freeAndClearOperationMutation.mutate()}
```

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### **–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –ü—Ä–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏ —Å—Ç–∞–Ω–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå –¢–æ–ª—å–∫–æ –º–µ–Ω—è–ª—Å—è —Å—Ç–∞—Ç—É—Å `isAvailable`, –Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–π
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ —á–µ—Ç–∫–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –æ–ø–µ—Ä–∞—Ü–∏–µ–π

### **–ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ **–í—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- ‚úÖ **–û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏:** –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫ —Å—Ç–∞–Ω–∫—É
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ:** —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (–¥–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤)
- ‚úÖ **–ù–µ—Ç –∞–≤—Ç–æ–≤–æ–∑–≤—Ä–∞—Ç–∞:** –æ–ø–µ—Ä–∞—Ü–∏—è –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

## üöÄ **–ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –æ–ø–µ—Ä–∞—Ü–∏–µ–π**
1. –ù–∞–∂–º–∏—Ç–µ "‚úÖ –û—Å–≤–æ–±–æ–¥–∏—Ç—å —Å—Ç–∞–Ω–æ–∫" 
2. –í—ã–±–µ—Ä–∏—Ç–µ "üóëÔ∏è –û—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Å—Ç–∞–Ω–æ–∫"
3. –°—Ç–∞–Ω–æ–∫ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω, –æ–ø–µ—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞, –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ**
1. –ù–∞–∂–º–∏—Ç–µ "‚úÖ –û—Å–≤–æ–±–æ–¥–∏—Ç—å —Å—Ç–∞–Ω–æ–∫"
2. –í—ã–±–µ—Ä–∏—Ç–µ "üíπ –ü—Ä–æ—Å—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å (–æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é)"
3. –°—Ç–∞–Ω–æ–∫ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ —Å–≤–æ–±–æ–¥–Ω—ã–π, –Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–π

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è**
1. –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ (31/30 –¥–µ—Ç–∞–ª–µ–π)
2. –ù–∞–∂–º–∏—Ç–µ "‚úÖ –ó–∞–∫—Ä—ã—Ç—å"
3. –û–ø–µ—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –∏ —Å—Ç–∞–Ω–æ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è

## üìÅ **–ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´:**
- `src/pages/Production/components/MachineCard.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è

## üîó **–°–í–Ø–ó–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò:**
- `freeAndClearOperationMutation` - –Ω–æ–≤–∞—è –º—É—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
- `updateAvailabilityMutation` - —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º—É—Ç–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- `handleAvailabilityChange` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å –≤—ã–±–æ—Ä–æ–º –¥–µ–π—Å—Ç–≤–∏–π

–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: ${new Date().toLocaleString('ru-RU')}
