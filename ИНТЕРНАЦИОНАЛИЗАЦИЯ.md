# üåê –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (i18n)

## –û–±–∑–æ—Ä

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Production CRM –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è —Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏. –ü–µ—Ä–µ–≤–æ–¥—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –∏ –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend
- **–ú–æ–¥—É–ª—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤**: `backend/src/modules/translations/`
- **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**: `/api/translations/*`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –¢–∞–±–ª–∏—Ü–∞ `translations` –≤ PostgreSQL

### Frontend
- **i18n —Å–∏—Å—Ç–µ–º–∞**: `frontend/src/i18n/`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞**: `frontend/src/components/LanguageSwitcher/`
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: `frontend/src/pages/Translations/`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
CREATE TABLE translations (
  id SERIAL PRIMARY KEY,
  key VARCHAR(255) NOT NULL UNIQUE,
  ru TEXT NOT NULL,
  en TEXT NOT NULL,
  category VARCHAR(100) DEFAULT 'general',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## API

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
```
GET /api/translations/client
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```json
{
  "ru": { "key": "–∑–Ω–∞—á–µ–Ω–∏–µ" },
  "en": { "key": "value" }
}
```

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã (–∞–¥–º–∏–Ω–∫–∞)
```
GET /api/translations
```

### –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
```
POST /api/translations/upsert
Content-Type: application/json

{
  "key": "menu.production",
  "ru": "–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ",
  "en": "Production",
  "category": "navigation"
}
```

### –£–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
```
DELETE /api/translations/:key
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–æ frontend

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
```typescript
import { useTranslation } from '../i18n';

const MyComponent: React.FC = () => {
  const { t, currentLanguage, setLanguage } = useTranslation();
  
  return (
    <div>
      <h1>{t('page.title')}</h1>
      <button onClick={() => setLanguage('en')}>
        Switch to English
      </button>
    </div>
  );
};
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤

1. **–ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/translations`
   - –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥"
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É

2. **–ß–µ—Ä–µ–∑ SQL**:
   ```sql
   INSERT INTO translations (key, ru, en, category) VALUES
   ('new.key', '–†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç', 'English text', 'category');
   ```

3. **–ß–µ—Ä–µ–∑ API**:
   ```javascript
   await fetch('/api/translations/upsert', {
     method: 'POST',
     headers: { 'Content-Type': 'application/json' },
     body: JSON.stringify({
       key: 'new.key',
       ru: '–†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç',
       en: 'English text',
       category: 'category'
     })
   });
   ```

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

- `navigation` - –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –º–µ–Ω—é
- `pages` - –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- `buttons` - –ö–Ω–æ–ø–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è
- `forms` - –ü–æ–ª—è —Ñ–æ—Ä–º –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `messages` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- `status` - –°—Ç–∞—Ç—É—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `general` - –û–±—â–∏–µ —Ç–µ–∫—Å—Ç—ã
- `translations` - –¢–µ–∫—Å—Ç—ã –∞–¥–º–∏–Ω–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –ë–î
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- API –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- Fallback –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ API
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –≤ localStorage

### üîÑ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ JSON/Excel
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª—é—Ä–∞–ª–∏–∑–∞—Ü–∏–∏
- –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –ø–µ—Ä–µ–≤–æ–¥—ã
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —è–∑—ã–∫–æ–≤

## –§–∞–π–ª—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Backend
```
backend/src/modules/translations/
‚îú‚îÄ‚îÄ translation.entity.ts      # –°—É—â–Ω–æ—Å—Ç—å –¥–ª—è TypeORM
‚îú‚îÄ‚îÄ translations.service.ts    # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ translations.controller.ts # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îú‚îÄ‚îÄ translations.module.ts     # NestJS –º–æ–¥—É–ª—å
‚îî‚îÄ‚îÄ index.ts                   # –≠–∫—Å–ø–æ—Ä—Ç—ã
```

### Frontend
```
frontend/src/
‚îú‚îÄ‚îÄ i18n/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts              # –û—Å–Ω–æ–≤–Ω–∞—è i18n —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ translations.ts       # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
‚îÇ   ‚îî‚îÄ‚îÄ api.ts               # API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
‚îú‚îÄ‚îÄ components/LanguageSwitcher/
‚îÇ   ‚îú‚îÄ‚îÄ LanguageSwitcher.tsx # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ pages/Translations/
    ‚îú‚îÄ‚îÄ TranslationsPage.tsx  # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ index.ts
```

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏

1. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –≤ –ë–î:
```sql
INSERT INTO translations (key, ru, en, category) VALUES
('users.title', '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', 'Users', 'pages'),
('users.create', '–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'Create User', 'buttons');
```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
```typescript
import { useTranslation } from '../../i18n';

const UsersPage: React.FC = () => {
  const { t } = useTranslation();
  
  return (
    <div>
      <h1>{t('users.title')}</h1>
      <Button>{t('users.create')}</Button>
    </div>
  );
};
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤:
```bash
./–£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô-–¢–ï–°–¢-i18n.bat  # –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
./–¢–ï–°–¢-–ü–ï–†–ï–í–û–î–´.bat               # –û–±—ã—á–Ω—ã–π —Ç–µ—Å—Ç
```

–ò–ª–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —è–∑—ã–∫ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ–∫—Å—Ç—ã –º–µ–Ω—é –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ü–µ—Ä–µ–≤–æ–¥—ã" (`/translations`)
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### API –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5100 –∏–ª–∏ 5101
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `translations` —Å–æ–∑–¥–∞–Ω–∞

### –ü–µ—Ä–µ–≤–æ–¥—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –ù–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–≤–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ë–î
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
