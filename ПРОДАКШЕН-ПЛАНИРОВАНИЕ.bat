@echo off
echo ================================================
echo üè≠ –ü–†–û–î–ê–ö–®–ï–ù –í–ï–†–°–ò–Ø –ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–Ø
echo ================================================

echo.
echo ‚úÖ –ü–†–û–î–ê–ö–®–ï–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
echo [‚úì] –£–±—Ä–∞–Ω—ã –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
echo [‚úì] –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
echo [‚úì] –†–µ–∞–ª—å–Ω—ã–π API –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π  
echo [‚úì] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —Å—Ç–∞–Ω–∫–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π
echo [‚úì] –ü—Ä–æ–¥–∞–∫—à–µ–Ω –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

echo.
echo 1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è backend...
cd /d "C:\Users\kasuf\Downloads\TheWho\production-crm\backend"
call npm run build
if %ERRORLEVEL% neq 0 (
    echo ‚ùå –û–®–ò–ë–ö–ê: Backend –∫–æ–º–ø–∏–ª—è—Ü–∏—è!
    pause
    exit /b 1
)

echo.
echo 2. –ö–æ–º–ø–∏–ª—è—Ü–∏—è frontend...
cd /d "C:\Users\kasuf\Downloads\TheWho\production-crm\frontend"
call npx tsc --noEmit
if %ERRORLEVEL% neq 0 (
    echo ‚ùå –û–®–ò–ë–ö–ê: Frontend –∫–æ–º–ø–∏–ª—è—Ü–∏—è!
    pause
    exit /b 1
)

echo.
echo 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–µ—Ä–æ–≤...
taskkill /f /im node.exe >nul 2>&1
timeout /t 2 >nul

echo –ó–∞–ø—É—Å–∫ backend (–ü–†–û–î–ê–ö–®–ï–ù)...
cd /d "C:\Users\kasuf\Downloads\TheWho\production-crm\backend"
start "Backend PROD" cmd /k "npm run start:prod"
timeout /t 8

echo –ó–∞–ø—É—Å–∫ frontend...
cd /d "C:\Users\kasuf\Downloads\TheWho\production-crm\frontend"
start "Frontend PROD" cmd /k "npm start"
timeout /t 8

echo.
echo 4. –¢–µ—Å—Ç –ø—Ä–æ–¥–∞–∫—à–µ–Ω API...
echo.
echo === –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ ===
curl -X POST "http://localhost:3001/api/planning/demo" -H "Content-Type: application/json"

echo.
echo.
echo 5. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞...
start http://localhost:3000/planning

echo.
echo ================================================
echo üéØ –ü–†–û–î–ê–ö–®–ï–ù –§–£–ù–ö–¶–ò–û–ù–ê–õ:
echo ================================================
echo.
echo 1. –ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï:
echo    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–∫–∞–∑—ã –∏–∑ –ë–î
echo    - –†–µ–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Å—Ç–∞–Ω–∫–∏
echo    - –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Å—Ç–∞–Ω–∫–æ–≤
echo.
echo 2. –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –û–ü–ï–†–ê–¶–ò–ô:
echo    - –†–µ–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
echo    - –°—Ç–∞–Ω–æ–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–Ω—è—Ç—ã–º (isOccupied=true)
echo    - –û–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "assigned"
echo    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å—Ç–∞–Ω–∫–∞
echo.
echo 3. –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï:
echo    - –ù–æ–º–µ—Ä —á–µ—Ä—Ç–µ–∂–∞ + –Ω–æ–º–µ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏
echo    - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –ë–î
echo    - –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö –∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
echo.
echo ================================================
echo üîç –ü–†–û–í–ï–†–¨–¢–ï –í –ò–ù–¢–ï–†–§–ï–ô–°–ï:
echo ================================================
echo.
echo 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
echo 2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é - –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
echo 3. –ù–∞–∂–º–∏—Ç–µ "–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤ —Ä–∞–±–æ—Ç—É"
echo 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î —á—Ç–æ —Å—Ç–∞–Ω–æ–∫ —Å—Ç–∞–ª –∑–∞–Ω—è—Ç—ã–º
echo 5. –û–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–∏–ª–∞ assignedMachine –∏ —Å—Ç–∞—Ç—É—Å
echo.
echo ================================================
pause
