@echo off
echo ===============================================
echo üéâ –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´ –ê–í–¢–û–ó–ê–í–ï–†–®–ï–ù–ò–Ø –û–ü–ï–†–ê–¶–ò–ô
echo ===============================================

echo.
echo [1/3] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ backend...
curl -s -X GET "http://localhost:5100/api/operations/completion/check-all-active" > nul 2>&1
if %ERRORLEVEL% neq 0 (
    echo ‚ùå Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω!
    echo.
    echo üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º backend...
    start /min cmd /c "cd /d C:\Users\kasuf\Downloads\TheWho\production-crm\backend && START-FIXED-BACKEND.bat"
    echo ‚è≥ –ñ–¥–µ–º 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞...
    timeout /t 10 /nobreak > nul
) else (
    echo ‚úÖ Backend –≥–æ—Ç–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 5100
)

echo.
echo [2/3] –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend...
curl -s "http://localhost:3000" > nul 2>&1
if %ERRORLEVEL% neq 0 (
    echo ‚ùå Frontend –Ω–µ –∑–∞–ø—É—â–µ–Ω!
    echo.
    echo üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º frontend...
    start /min cmd /c "cd /d C:\Users\kasuf\Downloads\TheWho\production-crm\frontend && npm start"
    echo ‚è≥ Frontend –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (—ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-2 –º–∏–Ω—É—Ç—ã)...
) else (
    echo ‚úÖ Frontend –≥–æ—Ç–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 3000
)

echo.
echo [3/3] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
curl -s -X GET "http://localhost:5100/api/operations/completion/check-all-active" > check_result.json 2>&1

echo.
echo ========================================
echo üéØ –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–ó–ê–í–ï–†–®–ï–ù–ò–Ø –ì–û–¢–û–í–ê!
echo ========================================
echo.
echo üìã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
echo 1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000
echo 2. –†–∞–∑–¥–µ–ª: –°–º–µ–Ω—ã ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞  
echo 3. –ù–∞–π–¥–∏—Ç–µ: C6HP0021A-TEST
echo 4. –ù–∞–∂–º–∏—Ç–µ: "–ó–∞–ø–∏—Å—å —Å–º–µ–Ω—ã"
echo 5. –í–≤–µ–¥–∏—Ç–µ: –î–µ–Ω—å=3, –ù–æ—á—å=2 (–∏—Ç–æ–≥–æ 5 = –ø–ª–∞–Ω!)
echo 6. –ß–µ—Ä–µ–∑ 15 —Å–µ–∫ –ø–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ! üéâ
echo.
echo üîÑ –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞: –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
echo üì± –¢—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è: –ó–∞–∫—Ä—ã—Ç—å | –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å | –°–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
echo üéõÔ∏è –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º
echo.
echo ===============================================
echo üí° –ü–û–õ–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø: 
echo    –°–ò–°–¢–ï–ú–ê-–ê–í–¢–û–ó–ê–í–ï–†–®–ï–ù–ò–Ø-–ì–û–¢–û–í–ê.md
echo ===============================================

echo.
echo –ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–ª–∞–≤–∏—à—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞...
pause > nul

echo –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–∏—Å—Ç–µ–º—É...
start http://localhost:3000

echo.
echo üöÄ –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞! –ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã!
pause
